generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  user_id       String   @id @default(uuid())
  email         String   @unique
  name          String
  lastname      String
  password      String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  emailVerified Boolean
  avatarUrl     String?
  movies        Movie[]
}

model EmailVerification {
  id               Int      @id @default(autoincrement())
  email            String
  verificationCode Int
  createdAt        DateTime @default(now())
  expiresAt        DateTime @default(dbgenerated("(now() + interval 10 minute)"))
}

model Genre {
  genre_id String  @id @default(uuid())
  name     String
  movies   Movie[]
}

model Director {
  director_id String  @id @default(uuid())
  name        String
  movies      Movie[]
}

model Writer {
  writer_id String  @id @default(uuid())
  name      String
  movies    Movie[]
}

model Actor {
  actor_id String  @id @default(uuid())
  name     String
  movies   Movie[]
}

model Movie {
  movie_id       String     @id @default(uuid())
  thumbnailUrl   String?
  imageUrl       String?
  date           String
  title          String
  productionYear Int
  movieUrl       String?    
  synopsis       String     @db.Text
  user_id        String
  enabled        Boolean
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt
  directors      Director[]
  writers        Writer[]
  cast           Actor[]
  genres         Genre[]
  user           User       @relation(fields: [user_id], references: [user_id])

  @@index([user_id])
}